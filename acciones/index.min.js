document.getElementById("submit").addEventListener("click", submit);

function submit(event, validarFormulario, generarPDF) {
  event.preventDefault();
  validarFormulario();

  const inputNombre = document.querySelector('input[name="Nombre"]');
  const inputFecha = document.querySelector('input[name="Fecha"]');
  const inputPuesto = document.querySelector('input[name="Puesto"]');
  const inputIdentificación = document.querySelector('input[name="Identificación"]');
  const selectContrato = document.querySelector('select[name="Contrato"]');

  const Nombre = inputNombre.value;
  const Fecha = inputFecha.value;
  const Puesto = inputPuesto.value;
  const Identificación = inputIdentificación.value;
  const Contrato = selectContrato.value;


  // Comprueba si el usuario ha aceptado los términos y condiciones
  const términosAceptados = document.querySelector("#terminos-y-condiciones-aceptado");
  if (términosAceptados && términosAceptados.checked) {

// Carga las imágenes
const membrete = new Image();
membrete.src = "imágenes/recursos_humanos.png";

// Obtiene la fecha actual
const fechaActual = new Date();

const options = { year: 'numeric', month: 'long', day: 'numeric' };
const fechaActualFormateada = fechaActual.toLocaleDateString('es-ES', options);

// Obtiene la fecha ingresada por el usuario
const Fecha = new Date(inputFecha.value);
const option = { year: 'numeric', month: 'long', day: 'numeric' };
const fechaSolicitada = Fecha.toLocaleDateString('es-ES', option);


// Genera el contenido del PDF
function generarContenido(pdf) {
  pdf.setFont('arial nova light', 'bold');
  pdf.setFontSize(14);

  // Agrega el membrete
  pdf.addImage(membrete, "PNG",5, 5, 205, 270);

  // Agrega el título, fecha y nombre de la empresa
  pdf.text('Frescas y Maduradas Colombia S.A.S', 65, 55);
  pdf.text('NIT 900.704.771-7', 85, 63);
  pdf.text('CERTIFICA QUE: ', 85, 75);

  // Agrega el nombre, documento y No. del empleado
  pdf.text(Nombre, 20, 100);
  pdf.text('CC:', 20, 106);
  pdf.text(Identificación, 30, 106);
  
    // Fuente
    pdf.setFont('arial nova light', 'normal');
    pdf.setFontSize(13);

  //| Agrega el texto del certificado 
  pdf.text('Labora en esta empresa de acuerdo con la siguiente información:', 20, 111);


  // Fuente
  pdf.setFont('arial nova light', 'bold');

    // Texto en negrilla
  pdf.text('Tipo de contrato: ', 20 ,130);
  pdf.text('Cargo(s) desempeñado(s):', 20, 138);
  pdf.text('Estado:', 20, 145);
  pdf.text('Fecha de inicio:', 20, 152);
  pdf.text('Tipo de remuneración:', 20, 160);


  // Fuente
  pdf.setFont('arial nova light', 'normal');

  // Texto Respuesta
  pdf.text(Contrato, 100, 130)
  pdf.text(Puesto, 100, 138);
  pdf.text('Activo', 100, 145);
  pdf.text(`${fechaSolicitada}`, 100, 152);
  pdf.text('Salario', 100, 160);

  //texto
  pdf.text('Se expide la presente por solicitud del interesado(a), en Bogotá el día ' +`${fechaActualFormateada}`, 20, 175);

  // Firma
  pdf.text("Cordialmente,", 20, 190);

  pdf.text('Alexandra Milena Quiroga Velada', 20, 226);
  pdf.text('Analista TH y Administrativo', 20, 232);
  pdf.text('Tel: 3105462538', 20, 238);
  pdf.text('Departamento de Talento Humano', 20, 244);
}

};// Genera el PDF
function generarPDF() {
  // Crea un nuevo PDF
  const pdf = new jsPDF({ orientation: "portrait", unit: "mm", format: "letter" });

  // Genera el contenido del PDF
  generarContenido(pdf);

  // Descarga el PDF
  pdf.save("Certificado.pdf");
}

// Escucha el evento click del botón de envío
document.getElementById("submit").addEventListener("click", generarPDF);

// Valida el formulario
function validarFormulario() {
  const camposObligatorios = ["Nombre", "Identificación", "Puesto", "Fecha", "Términos"];
  for (const campo of camposObligatorios) {
    const valorCampo = document.querySelector(`input[name="${campo}"]`).value;
    if (valorCampo === "") {
      alert(`El campo ${campo} es obligatorio.`);
      return false;
    }
  }
}
}

